import{d as C,u as q,r as d,a as u,o as y,c as F,w as o,b as i,e,f as t,g as m,h as z,_ as L,i as D,j as M,k as S,F as U,t as Z,l as A,m as B,T as E,n as K,p as H,q as X,s as J}from"./index-DClaMjPQ.js";import{_ as Q,C as W,i as Y}from"./index-CBrqVLWp.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";const te=i("h3",{class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"}," 忘记密码了? 🔒 ",-1),oe={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},ne=C({name:"ResetPasswordForm",__name:"index",props:{account:{}},emits:["onLogin","onResetPassword"],setup(w,{emit:k}){const N=w,v=k,b=q(),p=d(!1),f=d(),s=d({account:N.account??localStorage.login_account??"",captcha:"",newPassword:""}),R=d({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],newPassword:[{required:!0,trigger:"blur",message:"请输入新密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});function n(){var _;b.info("重置密码仅提供界面演示，无实际功能，需开发者自行扩展"),(_=f.value)==null||_.validate().then(()=>{v("onResetPassword",s.value.account)}).catch(()=>{})}return(_,a)=>{const g=L,r=u("NInput"),l=u("NFormItem"),h=u("NButton"),I=u("NInputGroup"),$=u("NForm");return y(),F($,{ref_key:"formRef",ref:f,model:t(s),rules:t(R),"show-label":!1,class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:o(()=>[te,i("div",null,[e(l,{path:"account"},{default:o(()=>[e(r,{value:t(s).account,"onUpdate:value":a[0]||(a[0]=c=>t(s).account=c),size:"large",placeholder:"用户名",tabindex:"1"},{prefix:o(()=>[e(g,{name:"ri:user-3-fill"})]),_:1},8,["value"])]),_:1}),e(l,{path:"captcha"},{default:o(()=>[e(I,null,{default:o(()=>[e(r,{value:t(s).captcha,"onUpdate:value":a[1]||(a[1]=c=>t(s).captcha=c),size:"large",placeholder:"验证码",tabindex:"2"},{prefix:o(()=>[e(g,{name:"ic:baseline-verified-user"})]),_:1},8,["value"]),e(h,{size:"large"},{default:o(()=>[m(" 发送验证码 ")]),_:1})]),_:1})]),_:1}),e(l,{path:"newPassword"},{default:o(()=>[e(r,{value:t(s).newPassword,"onUpdate:value":a[2]||(a[2]=c=>t(s).newPassword=c),type:"password","show-password-on":"click",size:"large",placeholder:"新密码",tabindex:"3"},{prefix:o(()=>[e(g,{name:"ri:lock-2-fill"})]),_:1},8,["value"])]),_:1})]),e(h,{loading:t(p),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:z(n,["prevent"])},{default:o(()=>[m(" 确认 ")]),_:1},8,["loading"]),i("div",oe,[e(h,{text:"",type:"primary",onClick:a[3]||(a[3]=c=>v("onLogin",t(s).account))},{default:o(()=>[m(" 去登录 ")]),_:1})])]),_:1},8,["model","rules"])}}}),se=i("h3",{class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"}," 探索从这里开始! 🚀 ",-1),re={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},ae=C({name:"RegisterForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister"],setup(w,{emit:k}){const N=w,v=k,b=q(),p=d(!1),f=d(),s=d({account:N.account??"",captcha:"",password:"",checkPassword:""}),R=d({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkPassword:[{required:!0,trigger:"blur",message:"请再次输入密码"},{validator:(_,a)=>a!==s.value.password?new Error("两次输入的密码不一致"):!0}]});function n(){var _;b.info("注册模块仅提供界面演示，无实际功能，需开发者自行扩展"),(_=f.value)==null||_.validate().then(()=>{v("onRegister",s.value.account)}).catch(()=>{})}return(_,a)=>{const g=L,r=u("NInput"),l=u("NFormItem"),h=u("NButton"),I=u("NInputGroup"),$=u("NForm");return y(),F($,{ref_key:"formRef",ref:f,model:t(s),rules:t(R),"show-label":!1,class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:o(()=>[se,i("div",null,[e(l,{path:"account"},{default:o(()=>[e(r,{value:t(s).account,"onUpdate:value":a[0]||(a[0]=c=>t(s).account=c),size:"large",placeholder:"用户名",tabindex:"1"},{prefix:o(()=>[e(g,{name:"ri:user-3-fill"})]),_:1},8,["value"])]),_:1}),e(l,{path:"captcha"},{default:o(()=>[e(I,null,{default:o(()=>[e(r,{value:t(s).captcha,"onUpdate:value":a[1]||(a[1]=c=>t(s).captcha=c),size:"large",placeholder:"验证码",tabindex:"2"},{prefix:o(()=>[e(g,{name:"ic:baseline-verified-user"})]),_:1},8,["value"]),e(h,{size:"large"},{default:o(()=>[m(" 发送验证码 ")]),_:1})]),_:1})]),_:1}),e(l,{path:"password"},{default:o(()=>[e(r,{value:t(s).password,"onUpdate:value":a[2]||(a[2]=c=>t(s).password=c),type:"password","show-password-on":"click",size:"large",placeholder:"密码",tabindex:"3"},{prefix:o(()=>[e(g,{name:"ri:lock-2-fill"})]),_:1},8,["value"])]),_:1}),e(l,{path:"checkPassword"},{default:o(()=>[e(r,{value:t(s).checkPassword,"onUpdate:value":a[3]||(a[3]=c=>t(s).checkPassword=c),type:"password","show-password-on":"click",size:"large",placeholder:"确认密码",tabindex:"4"},{prefix:o(()=>[e(g,{name:"ri:lock-2-fill"})]),_:1},8,["value"])]),_:1})]),e(h,{loading:t(p),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:z(n,["prevent"])},{default:o(()=>[m(" 注册 ")]),_:1},8,["loading"]),i("div",re,[m(" 已经有帐号? "),e(h,{text:"",type:"primary",onClick:a[4]||(a[4]=c=>v("onLogin",t(s).account))},{default:o(()=>[m(" 去登录 ")]),_:1})])]),_:1},8,["model","rules"])}}}),le={class:"mb-6"},ie={class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"},ce={class:"mb-4 flex-center-between"},ue={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},de={key:1,class:"flex-col-center"},pe=i("img",{src:"https://s2.loli.net/2024/04/26/GsahtuIZ9XOg5jr.png",class:"h-[250px] w-[250px]"},null,-1),me=i("div",{class:"mt-2 op-50"}," 请使用微信扫码登录 ",-1),fe=[pe,me],ge={class:"mt-4 text-center -mb-4"},_e=C({name:"LoginForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister","onResetPassword"],setup(w,{emit:k}){const N=w,v=k,b=D(),p="One-step-admin 基础版",f=d(!1),s=d("default"),R=d(),n=d({account:N.account??localStorage.login_account??"",password:"",remember:!!localStorage.login_account}),_=d({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});function a(){var r;(r=R.value)==null||r.validate().then(()=>{f.value=!0,b.login(n.value).then(()=>{f.value=!1,n.value.remember?localStorage.setItem("login_account",n.value.account):localStorage.removeItem("login_account"),v("onLogin",n.value.account)}).finally(()=>{f.value=!1})})}function g(r){n.value.account=r,n.value.password="123456",a()}return(r,l)=>{const h=Q,I=L,$=u("NInput"),c=u("NFormItem"),V=u("NCheckbox"),P=u("NButton"),G=u("NDivider"),T=u("NSpace"),j=u("NForm");return y(),F(j,{ref_key:"formRef",ref:R,model:t(n),rules:t(_),"show-label":!1,class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:o(()=>[i("div",le,[e(h,{modelValue:t(s),"onUpdate:modelValue":l[0]||(l[0]=x=>M(s)?s.value=x:null),options:[{label:"账号密码登录",value:"default"},{label:"扫码登录",value:"qrcode"}]},null,8,["modelValue"])]),t(s)==="default"?(y(),S(U,{key:0},[i("h3",ie," 欢迎使用 "+Z(t(p))+" ! 👋🏻 ",1),i("div",null,[e(c,{path:"account"},{default:o(()=>[e($,{value:t(n).account,"onUpdate:value":l[1]||(l[1]=x=>t(n).account=x),size:"large",placeholder:"用户名",tabindex:"1"},{prefix:o(()=>[e(I,{name:"ri:user-3-fill"})]),_:1},8,["value"])]),_:1}),e(c,{path:"password"},{default:o(()=>[e($,{value:t(n).password,"onUpdate:value":l[2]||(l[2]=x=>t(n).password=x),type:"password","show-password-on":"click",size:"large",placeholder:"密码",tabindex:"2",onKeyup:A(a,["enter"])},{prefix:o(()=>[e(I,{name:"ri:lock-2-fill"})]),_:1},8,["value"])]),_:1})]),i("div",ce,[e(V,{checked:t(n).remember,"onUpdate:checked":l[3]||(l[3]=x=>t(n).remember=x)},{default:o(()=>[m(" 记住我 ")]),_:1},8,["checked"]),e(P,{text:"",type:"primary",onClick:l[4]||(l[4]=x=>v("onResetPassword",t(n).account))},{default:o(()=>[m(" 忘记密码了? ")]),_:1})]),e(P,{loading:t(f),type:"primary",size:"large",style:{width:"100%"},onClick:z(a,["prevent"])},{default:o(()=>[m(" 登录 ")]),_:1},8,["loading"]),i("div",ue,[m(" 还没有帐号? "),e(P,{text:"",type:"primary",onClick:l[5]||(l[5]=x=>v("onRegister",t(n).account))},{default:o(()=>[m(" 创建新帐号 ")]),_:1})])],64)):t(s)==="qrcode"?(y(),S("div",de,fe)):B("",!0),i("div",ge,[e(G,null,{default:o(()=>[m("演示账号一键登录")]),_:1}),e(T,{justify:"center"},{default:o(()=>[e(P,{type:"primary",size:"small",onClick:l[6]||(l[6]=x=>g("admin"))},{default:o(()=>[m(" admin ")]),_:1}),e(P,{size:"small",onClick:l[7]||(l[7]=x=>g("test"))},{default:o(()=>[m(" test ")]),_:1})]),_:1})])]),_:1},8,["model","rules"])}}}),ve=""+new URL("login-banner-ZfMZACb6.png",import.meta.url).href,O=w=>(H("data-v-e76978b8"),w=w(),X(),w),xe=O(()=>i("div",{class:"bg-banner"},null,-1)),we={class:"login-box"},be=O(()=>i("div",{class:"login-banner"},[i("img",{src:Y,class:"absolute left-4 top-4 h-30px rounded ring ring-stone-2 dark-ring-stone-8"}),i("img",{src:ve,class:"banner"})],-1)),he={class:"login-form flex-col-center"},ye=C({name:"Login",__name:"login",setup(w){var s;const k=K(),N=J(),v=d(((s=k.query.redirect)==null?void 0:s.toString())??"/"),b=d(),p=d("login"),f=d();return(R,n)=>{const _=_e,a=ae,g=ne;return y(),S(U,null,[xe,i("div",we,[be,i("div",he,[e(E,{name:"fade",mode:"out-in"},{default:o(()=>[t(p)==="login"?(y(),F(_,{key:0,ref_key:"formRef",ref:f,account:t(b),onOnLogin:n[0]||(n[0]=r=>t(N).push(t(v))),onOnRegister:n[1]||(n[1]=r=>{p.value="register",r=r}),onOnResetPassword:n[2]||(n[2]=r=>{p.value="resetPassword",r=r})},null,8,["account"])):t(p)==="register"?(y(),F(a,{key:1,ref_key:"formRef",ref:f,account:t(b),onOnRegister:n[3]||(n[3]=r=>{p.value="login",r=r}),onOnLogin:n[4]||(n[4]=r=>p.value="login")},null,8,["account"])):t(p)==="resetPassword"?(y(),F(g,{key:2,ref_key:"formRef",ref:f,account:t(b),onOnResetPassword:n[5]||(n[5]=r=>{p.value="login",r=r}),onOnLogin:n[6]||(n[6]=r=>p.value="login")},null,8,["account"])):B("",!0)]),_:1})])]),e(W)],64)}}}),Ie=ee(ye,[["__scopeId","data-v-e76978b8"]]);export{Ie as default};
